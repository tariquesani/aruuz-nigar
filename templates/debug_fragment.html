<!doctype html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>Fragment Debug</title>
</head>
<body>

<h2>Fragment Debug (Pre-Meter)</h2>

<form method="post">
    <input type="text" name="text" value="{{ text_input }}" autofocus style="width: 60%">
    <button type="submit">Test</button>
</form>

{% if error %}
    <p style="color:red">{{ error }}</p>
{% endif %}

{% if result %}
    <hr>

    <p><strong>Original text:</strong> {{ result.original_text }}</p>

    <h3>Word-level state (after contextual adjustments)</h3>
    <ul>
        {% for w in result.words %}
            <li>
                <strong>{{ w.word }}</strong><br>
                Codes:
                <ul>
                    {% for c in w.codes %}
                        <li>{{ c }}</li>
                    {% endfor %}
                </ul>

                <small>
                    Database used: {{ w.used_database }}<br>
                    {% if w.taqti %}Taqti: {{ w.taqti }}<br>{% endif %}
                    {% if w.muarrab %}Muarrab: {{ w.muarrab }}{% endif %}
                </small>
            </li>
            <br>
        {% endfor %}
    </ul>

    <h3>Combined code options (per word)</h3>
    <ul>
        {% for codes in result.combined_code_options %}
            <li>{{ codes }}</li>
        {% endfor %}
    </ul>

    <p><em>{{ result.note }}</em></p>

{% endif %}

</body>
</html>
